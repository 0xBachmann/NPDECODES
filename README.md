# NPDECODES

## General Remarks

* Don't loose time on files in `mysolution/` and `templates/`. They will later be generated automatically from `mastersolution/` by a script.
* Not only the solutions, but also the corresponding templates need to compile and run without crash. So be careful when setting the solution/template tags in `mastersolution/`.
* The bullets below are only a selection. If you spot additional issues, e.g. ugly or too complicated code, fix it.
* Names of .cc and .h files: For example the files in the folder `MyHomeworkProblem/` should be called `myhomeworkproblem_main.cc`, `myhomeworkproblem_foo.cc`, `myhomeworkproblem_foo.h`, where foo is a placeholder for any name (summarized: lowercase, split words by _).

## Polishing

* Add comments if necessary.
* Only use the `#includes "..."` you need, e.g. for `Eigen::MatrixXd`, `#include "Eigen/Core"` is sufficient (no `#include "Eigen/Dense"` needed). Likewise for the `CMakeLists.txt`: Import/Link only what you need.
* Make the code follow the Google style (see https://google.github.io/styleguide/cppguide.html). In particular, respect the include order (https://google.github.io/styleguide/cppguide.html#Names_and_Order_of_Includes).
* Never store data in the remote repository that is generated by the code anyway (e.g. figures). The repo should only contain source files (and maybe some mesh files).
* Provide unit tests for all functions that the students have to change. If this is not possible for some reason, then point this out in the README.md of the exercise.
* Plotting is done as follows: The C++ code only stores the data in a .csv file (using `std::ofstream`). The plotting is then done by a python script that reads this .csv file. See e.g. BurgersEquation. In particular, remove all the MathGL code.

## Porting

### All files:

* In `mastersolution/ ` files replace:
    ```
    /* SOLUTION_BEGIN */
      <only in mastersolution>
    /* SOLUTION_END */
    ```
  by
    ```
    #if SOLUTION
      <only in mastersolution>
    #else
      <only in template>
    #endif
    ```

### Only lehrfem++ files:

* `nostd::span` (C++20) instead of `ForwardIteraters` for iterating over objects contiguous in memory (used e.g. in `Mesh::Entities()`, `SubEntities()`, `DofHandler`)
* Num() -> fix method calls!

## TODO

* `BoundaryWave`: mysolution has core dump
* `CoupledSecondOrderBVP`: needs tests and tags
* `ElementMatrixComputation`: bad unit tests
* `IncidenceMatrices`: wrong file structure and mysolution has core dump
* `LaxWendroffScheme`: unit test of mastersolution takes too long
* `OutputImpedanceBVP`: unit test of mysolution has infinite loop
* `PointEvaluationRhs`: bad includes
* `ProjectionOntoGradients`: completely messed up
* `RadauThreeTimestepping`: mysolution has core dump (and mastersolution takes very long)
* `SDIRKMethodOfLines`: mysolution has core dump
* `SimpleLinearFiniteElements`: bad names of files and classes
* `TransformationOfGalerkinMatrices`: bad typedefs
* `UnstableBVP`: No solution tags, i.e. #if SOLUTION,...

## Overview of Files

### Completely messed up
AdvectionFV2D, AxisymmetricBVP, LinearFE1D (needs many fixes), PredictingConvergence, ProjectionOntoGradients (needs many fixes), RegularizedNeumann (needs many fixes), UnstableBVP (needs many fixes), hello, world

### Read/Write meshes
AvgValBoundary, DebuggingFEM, ElementMatrixComputation, ErrorEstimatesForTraces, LinFeReactDiff, NonConformingCrouzeixRaviartFiniteElements, OutputImpedanceBVP, SDIRKMethodOfLines, SimpleLinearFiniteElements, SymplecticTimesteppingWaves, TestProblem

### Plots
1DWaveAbsorbingBC, BurgersEquation, DebuggingFEM (MathGL), DiscontinuousGalerkin1D, EngquistOsherNumericalFlux, ErrorEstimatesForTraces, FiniteVolumeSineConsLaw, LaxWendroffScheme, PointEvaluationRhs (MathGL), RadauThreeTimestepping, SDIRKMethodOfLines, SimpleLinearFiniteElements (MathGL), UnstableBVP

### Lehrfem
AvgValBoundary, BoundaryWave, DebuggingFEM, ElementMatrixComputation, ErrorEstimatesForTraces, HandlingDOFs, IncidenceMatrices, LengthOfBoundary, LinFeReactDiff, LinearFE1D, NonConformingCrouzeixRaviartFiniteElements, OutputImpedanceBVP, ParametricElementMatrices, PointEvaluationRhs, ProjectionOntoGradients, RadauThreeTimestepping, RegularizedNeumann, SDIRKMethodOfLines, SymplecticTimesteppingWaves, TestProblem, TestQuadratureRules, UnstableBVP, hello, world

### No/Wrong unit tests
BoundaryWave, OutputImpedanceBVP, ParametricElementMatrices, PointEvaluationRhs, ProjectionOntoGradients, RadauThreeTimestepping, SDIRKMethodOfLines, SymplecticTimesteppingWaves, hello, world

